<div class="min-h-full relative flex flex-col" style="height: 100vh">
  <mat-toolbar color="primary" class="w-full" [ngClass]="{'mat-elevation-z6': elevation}">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <div class="flex-shrink-0 block md:hidden">
            <button mat-icon-button (click)="sidenavOpened = !sidenavOpened">
              <mat-icon>menu</mat-icon>
            </button>
          </div>
          <div *ngIf="logo" class="flex-shrink-0 ml-4">
            <img class="h-8 w-8" [src]="logo.src" [alt]="logo.alt" />
          </div>
          <div>
            <!-- class="hidden md:block" -->
            <div class="ml-4 flex items-baseline space-x-4">
              <button mat-button *ngFor="let route of topRoutes" [routerLink]="route.path">
                <mat-icon *ngIf="route.icon" class="mr-4">{{ route.icon }}</mat-icon>
                <span *ngIf="route.text">{{ route.text }}</span>
              </button>
            </div>
          </div>
        </div>
        <div class="block">
          <div class="ml-4 flex items-center md:ml-6">
            <div class="ml-3 relative">
              <div>
                <ng-content select="rng-user-account-popup"></ng-content>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-toolbar>
  <mat-sidenav-container [hasBackdrop]="hasBackdrop">
    <mat-sidenav
      #sidenav
      [mode]="sidenavMode"
      [opened]="sidenavOpened"
      class="md:block"
      [ngClass]="{
        'fixed-sidenav-minimized': !fixedSidenavOpened
      }"
    >
      <div class="flex flex-col relative w-full h-full">
        <mat-action-list class="h-full w-full overflow-y-auto">
          <ng-container *ngFor="let route of sideRoutes">
            <ng-container *ngIf="!route.children && route.path">
              <mat-list-item [routerLink]="route.path">
                <mat-icon matListIcon>{{ route.icon }}</mat-icon>
                <p matLine>{{ route.text }}</p>
              </mat-list-item>
            </ng-container>

            <ng-container *ngIf="route.children">
              <mat-list-item (click)="route.opened = !route.opened">
                <mat-icon matListIcon *ngIf="!fixedSidenavOpened"
                  ><span class="flex justify-center">Â·</span></mat-icon
                >
                <p matLine>{{ route.text }}</p>
                <mat-icon>{{ route.opened ? 'expand_less' : 'expand_more' }}</mat-icon>
              </mat-list-item>
              <ng-container *ngFor="let childRoute of route.children">
                <mat-list-item [routerLink]="childRoute.path" *ngIf="route.opened">
                  <!--                   [ngStyle]="{'paddingLeft': fixedSidenavOpened ? '48px' : '0px'}"
 -->
                  <mat-icon matListIcon>{{ childRoute.icon }}</mat-icon>
                  <p matLine>{{ childRoute.text }}</p>
                </mat-list-item>
              </ng-container>
            </ng-container>
            <mat-divider *ngIf="route.divider"></mat-divider>
          </ng-container>
        </mat-action-list>

        <mat-action-list *ngIf="!isMobile" class="w-full p-0">
          <mat-divider></mat-divider>
          <mat-list-item mat-button (click)="toggleFixedSidenav()">
            <span class="w-full"></span>
            <mat-icon>{{
              fixedSidenavOpened ? 'keyboard_arrow_left' : 'keyboard_arrow_right'
            }}</mat-icon>
          </mat-list-item>
        </mat-action-list>
      </div>
    </mat-sidenav>
    <mat-sidenav-content>
      <div class="relative w-full h-full overflow-scroll">
        <ng-content></ng-content>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
