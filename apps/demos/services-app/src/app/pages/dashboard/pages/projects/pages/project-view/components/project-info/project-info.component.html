<div *ngIf="project" class="lg:container p-8 flex flex-col mx-auto">
  <div *ngIf="project.data.group" class="flex flex-row w-full h-auto">
    <div *ngIf="(collaborators$ | async)?.length === 0" class="self-center">
      <span>Añadir colaboradores</span>
    </div>
    <img
      *ngFor="let collaborator of collaborators$ | async | slice: 1"
      [matTooltip]="collaborator.data.name"
      class="rounded-full h-14 w-14 mx-2 mat-elevation-z2 object-cover"
      [src]="collaborator.data.avatar"
    />
    <button mat-icon-button class="rounded-full h-14 w-14 mx-2">
      <mat-icon>add</mat-icon>
    </button>
  </div>
  <span class="text-xl font-semibold mt-6 mb-2">Descripción</span>
  <div class="flex flex-col w-full p-4">
    <mat-action-list>
      <mat-list-item class="h-auto">
        <mat-icon mat-list-icon>description</mat-icon>
        <div mat-line class="whitespace-normal">
          {{ project.data.description }}
        </div>
      </mat-list-item>
    </mat-action-list>
  </div>
  <span class="text-xl font-semibold mt-6 mb-2">Detalles</span>
  <div class="flex flex-col p-4">
    <mat-action-list>
      <mat-list-item>
        <mat-icon mat-list-icon>money</mat-icon>
        <div mat-line class="text-gray-500">Coste</div>
        <div mat-line class="whitespace-normal">{{ project.data.cost | translocoCurrency }}</div>
      </mat-list-item>
      <mat-list-item>
        <mat-icon mat-list-icon>event</mat-icon>
        <div mat-line class="text-gray-500">{{ 'date.start' | transloco }}</div>
        <div mat-line class="whitespace-normal">
          {{
            project.data.startDate
              | translocoDate
                : {
                    dateStyle: 'long',
                    timeStyle: 'short'
                  }
          }}
        </div>
      </mat-list-item>
      <mat-list-item>
        <mat-icon mat-list-icon>event</mat-icon>
        <div mat-line class="text-gray-500">{{ 'date.estimatedEnd' | transloco }}</div>
        <div mat-line class="whitespace-normal">
          {{
            project.data.estimatedEndDate
              | translocoDate
                : {
                    dateStyle: 'long',
                    timeStyle: 'short'
                  }
          }}
        </div>
      </mat-list-item>
      <mat-list-item *ngIf="project.data.endingDate">
        <mat-icon mat-list-icon>event</mat-icon>
        <div mat-line class="text-gray-500">{{ 'date.end' | transloco }}</div>
        <div mat-line class="whitespace-normal">
          {{
            project.data.endingDate
              | translocoDate
                : {
                    dateStyle: 'long',
                    timeStyle: 'short'
                  }
          }}
        </div>
      </mat-list-item>
    </mat-action-list>
  </div>
  <span class="text-xl font-semibold mt-6 mb-2">{{ 'labels' | transloco }}</span>
  <div class="flex flex-col p-4">
    <mat-form-field class="example-chip-list" appearance="outline">
      <mat-chip-list #chipList aria-label="Labels selection">
        <mat-chip
          *ngFor="let label of project.data.labels"
          (removed)="removeLabel(label)"
          [style.backgroundColor]="labels.getColor(label)"
          class="text-white"
        >
          {{ 'labels.' + label | transloco }}
          <button matChipRemove class="text-white mb-1">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip>
        <input
          #labelsInput
          [placeholder]="'labels.newLabel' | transloco"
          [formControl]="labelsControl"
          [matChipInputFor]="chipList"
          [matAutocomplete]="auto"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="false"
        />
      </mat-chip-list>
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedLabel($event)">
        <mat-option *ngFor="let label of filteredLabels | async" [value]="label">
          <mat-icon [style.color]="labels.getColor(label)">circle</mat-icon>
          {{ 'labels.' + label | transloco }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </div>
  <span class="text-xl font-semibold mt-6 mb-2">{{ 'location' | transloco }}</span>
  <div class="flex flex-col p-4">
    <mat-action-list>
      <mat-list-item class="h-auto">
        <mat-icon mat-list-icon>place</mat-icon>
        <div mat-line class="whitespace-normal">
          {{ project.data.location }}
        </div>
      </mat-list-item>
    </mat-action-list>
  </div>
  <div
    class="flex w-full mt-4"
    *ngIf="!project.data.group && !project.data.accepted"
    (click)="acceptProject()"
  >
    <button mat-raised-button color="warn" class="w-full">
      {{ 'actions.accept' | transloco }}
    </button>
  </div>
</div>
