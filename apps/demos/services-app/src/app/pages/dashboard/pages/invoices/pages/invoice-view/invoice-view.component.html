<div class="lg:container p-8 flex flex-col mx-auto" *ngIf="invoice$ | async; let invoice">
  <div class="flex flex-row">
    <button mat-icon-button class="self-center" [routerLink]="['../../invoice-list']">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <header class="max-w-7xl w-full py-6 px-4 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-semibold text-gray-700 dark:text-gray-200">
        {{ (invoice$ | async)?.data.title }}
      </h1>
    </header>
    <button mat-icon-button class="self-center ml-auto" [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="requestIfTrue(invoice)">
        <mat-icon>delete</mat-icon> Eliminar
      </button>
    </mat-menu>
  </div>
  <div class="flex flex-col">
    <span class="text-lg font-medium mt-6 mb-2 text-gray-700 dark:text-gray-200">{{
      'title' | transloco
    }}</span>
    <div class="flex flex-col w-full p-4">
      <mat-action-list>
        <mat-list-item class="h-auto" (click)="changeTitle(invoice)">
          <mat-icon mat-list-icon>description</mat-icon>
          <div mat-line class="whitespace-normal py-4">
            {{ invoice.data.title }}
          </div>
        </mat-list-item>
      </mat-action-list>
    </div>
    <span class="text-lg font-medium mt-6 mb-2 text-gray-700 dark:text-gray-200">{{
      'description' | transloco
    }}</span>
    <div class="flex flex-col w-full p-4">
      <mat-action-list>
        <mat-list-item class="h-auto" (click)="changeDescription(invoice)">
          <mat-icon mat-list-icon>description</mat-icon>
          <div mat-line class="whitespace-normal py-4">
            {{ invoice.data.description || 'Sin información' }}
          </div>
        </mat-list-item>
      </mat-action-list>
    </div>
    <span class="text-lg font-medium mt-6 mb-2 text-gray-700 dark:text-gray-200">{{
      'details' | transloco
    }}</span>
    <div class="flex flex-col p-4">
      <mat-action-list>
        <mat-list-item class="h-auto" (click)="changeCost(invoice)">
          <mat-icon mat-list-icon>money</mat-icon>
          <div mat-line class="text-gray-500 pt-2">Coste</div>
          <div mat-line class="whitespace-normal pb-2">
            {{ invoice.data.cost | translocoCurrency }}
          </div>
        </mat-list-item>
        <mat-list-item class="h-auto" (click)="changeTaxes(invoice)">
          <mat-icon mat-list-icon>money</mat-icon>
          <div mat-line class="text-gray-500 pt-2">Impuestos</div>
          <div mat-line class="whitespace-normal pb-2">
            {{ invoice.data.taxes | translocoPercent }}
          </div>
        </mat-list-item>
        <mat-list-item class="h-auto">
          <mat-icon mat-list-icon>event</mat-icon>
          <div mat-line class="text-gray-500 pt-2">{{ 'date' | transloco }}</div>
          <div mat-line class="whitespace-normal pb-2">
            {{
              invoice.data.date
                | translocoDate
                  : {
                      dateStyle: 'long',
                      timeStyle: 'short'
                    }
            }}
          </div>
        </mat-list-item>
        <mat-list-item class="h-auto" (click)="viewDocument(invoice)">
          <mat-icon mat-list-icon>attach_file</mat-icon>
          <div mat-line class="text-gray-500 py-4" *ngIf="invoice.data.url">Documento adjunto</div>
          <div mat-line class="text-gray-500 py-4" *ngIf="!invoice.data.url">
            No hay ningún documento
          </div>
        </mat-list-item>
      </mat-action-list>
    </div>
    <span class="text-lg font-medium mt-6 mb-2 text-gray-700 dark:text-gray-200">{{
      'project' | transloco
    }}</span>
    <div class="flex flex-col p-4">
      <mat-action-list>
        <mat-list-item
          class="h-auto"
          [routerLink]="['../../../projects/project-view', invoice.data.project]"
        >
          <mat-icon mat-list-icon>work</mat-icon>
          <div mat-line class="text-gray-500 pt-2">{{ 'project' | transloco }}</div>
          <div mat-line class="whitespace-normal pb-2">{{ invoice.data.project }}</div>
        </mat-list-item>
      </mat-action-list>
    </div>
  </div>
</div>
