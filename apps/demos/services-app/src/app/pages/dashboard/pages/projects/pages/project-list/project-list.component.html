<div>
  <header class="mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <h1 class="text-3xl font-semibold text-gray-700">Proyectos</h1>
  </header>
  <mat-tab-group
    animationDuration="0ms"
    [selectedIndex]="tabSelected"
    (selectedIndexChange)="changeTab($event)"
  >
    <mat-tab>
      <ng-template mat-tab-label>
        {{ 'active' | transloco }} ({{ (activeProjects$ | async)?.length }})
      </ng-template>
      <ng-template matTabContent>
        <ng-container
          *ngTemplateOutlet="projectsListTemplate; context: {$implicit: activeProjects$ | async}"
        ></ng-container>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        {{ 'offered' | transloco }} ({{ (otherProjects$ | async)?.length }})
      </ng-template>
      <ng-template matTabContent>
        <ng-container
          *ngTemplateOutlet="projectsListTemplate; context: {$implicit: otherProjects$ | async}"
        ></ng-container>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        {{ 'inactive' | transloco }} ({{ (inactiveProjects$ | async)?.length }})
      </ng-template>
      <ng-template matTabContent>
        <ng-container
          *ngTemplateOutlet="projectsListTemplate; context: {$implicit: inactiveProjects$ | async}"
        ></ng-container>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        {{ 'finished' | transloco }} ({{ (finishedProjects$ | async)?.length }})
      </ng-template>
      <ng-template matTabContent>
        <ng-container
          *ngTemplateOutlet="projectsListTemplate; context: {$implicit: finishedProjects$ | async}"
        ></ng-container>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</div>
<ng-template #projectsListTemplate let-projects>
  <div class="lg:container mx-auto p-4">
    <div class="flex flex-row w-full mb-4 overflow-y-auto">
      <button
        mat-button
        [ngClass]="filterByTypeSelected === 'all' ? 'mat-raised-button' : 'mat-stroked-button'"
        class="mx-2 font-thin min-w-min"
        color="primary"
        (click)="filterByType()"
      >
        <mat-icon class="text-lg">grid_view</mat-icon>
        <span>{{ 'all' | transloco }}</span>
      </button>
      <button
        mat-button
        [ngClass]="filterByTypeSelected === 'paint' ? 'mat-raised-button' : 'mat-stroked-button'"
        class="mx-2 font-thin min-w-min"
        color="primary"
        (click)="filterByType('paint')"
      >
        <mat-icon class="text-lg">format_paint</mat-icon>
        <span>{{ 'paint' | transloco }}</span>
      </button>
      <button
        mat-button
        [ngClass]="
          filterByTypeSelected === 'construction' ? 'mat-raised-button' : 'mat-stroked-button'
        "
        class="mx-2 font-thin min-w-min"
        color="primary"
        (click)="filterByType('construction')"
      >
        <mat-icon class="text-lg">construction</mat-icon>
        <span>{{ 'rehabilitation' | transloco }}</span>
      </button>
    </div>
    <div class="flex flex-col w-full" *ngFor="let project of projects">
      <rng-project-card [project]="project"></rng-project-card>
    </div>
  </div>
</ng-template>
